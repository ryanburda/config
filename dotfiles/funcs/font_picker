#!/bin/zsh
#
# NAME
#   font_picker - changes font in alacritty.
#
# SYNOPSIS
#   font_picker
#
# DESCRIPTION
#   Use fzf to select a font. The font is then substituted into alacritty.yml
fonts=(
    "FiraCode Nerd Font Mono"
    "Hack Nerd Font Mono"
    "JetBrainsMono Nerd Font Mono"
    "Liga SFMono Nerd Font"
    "SauceCodePro Nerd Font Mono"
    "OpenDyslexicM Nerd Font Mono"
    "SpaceMono Nerd Font Mono"
    "GohuFont 14 Nerd Font Mono"
    "ProggyClean Nerd Font Mono"
)

selection=$(printf "%s\n" "${fonts[@]}" | sort -r | fzf)
if [[ -z "${selection}" ]]; then
    return 0
fi

# Before updating the alacritty.yml we first need to get the current theme.
# The template does not contain any information about themes so we will use
# the following variable to reapply the current theme.
theme=$(alacritty-themes --current | head -n 1)

# Fill in the font name in the template to create a new alacritty.yml file.
export ALACRITTY_FONT=$selection
envsubst < "${XDG_CONFIG_HOME}/alacritty/alacritty.yml.template" > "${XDG_CONFIG_HOME}/alacritty/alacritty.yml"

alacritty-themes $theme
