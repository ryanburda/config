name: krabs
root: ~/Developer/sqsp/krabs

windows:
  - main:
      layout: even-vertical
      panes:
        - vim
        - terminal:
          - tmux resize-pane -t 1 -y 10
          - clear
  - scratch:
      root: ~/Developer/scratch/src/krabs
      layout: even-vertical
      panes:
        - vim
        - #empty
  - cmds:
      layout: even-vertical
      panes:
        - local_postgres:
          - docker container start krabs_db || docker container run -d --name krabs_db -p 35432:5432 -v postgres-krabs-volume:/var/lib/postgres/data -e POSTGRES_PASSWORD=postgres postgres:11.13
          - sleep 3
          - clear
          - psql -h localhost -p 35432 -d krabs -U postgres
        - cloud_sql_proxy -instances=krabs-stage-001:us-central1:krabs-db-43897a3a5dfe=tcp:127.0.0.1:35433
        - cloud_sql_proxy -instances=krabs-prod-001:us-central1:krabs-db-9bc061c8692f=tcp:127.0.0.1:35434
